# Session이란?

웹 애플리케이션 개발에서 `Session`은 **사용자와 서버 간의 상태를 유지**하기 위해 사용하는 중요한 개념입니다. HTTP는 기본적으로 상태를 저장하지 않는(stateless) 프로토콜이기 때문에, 클라이언트가 서버에 요청할 때마다 독립적인 연결로 처리됩니다. 따라서, 로그인 상태 유지나 장바구니 같은 기능을 구현하려면 세션이 필요합니다.

## 1. Session의 개념

- **Session**은 특정 사용자와 서버 간의 연결이 일정 시간 동안 지속되도록 돕는 **상태 관리 메커니즘**입니다.
- 각 사용자가 웹 애플리케이션에 접속할 때 **고유의 세션 ID**가 발급되며, 이를 통해 사용자를 식별할 수 있습니다.
- 세션은 주로 로그인 정보를 비롯한 **사용자 데이터를 서버에 저장**하여 사용자와의 상호작용을 지속적으로 유지합니다.

![image](https://github.com/user-attachments/assets/72c3c684-ca55-4800-a1d3-ec82a55d662f)


## 2. Session의 특징

- **상태 저장**: HTTP의 무상태성을 극복하여 **로그인 정보, 장바구니, 사용자 설정** 등의 상태 정보를 유지할 수 있습니다.
- **서버 측에 저장**: 클라이언트의 정보는 보안상의 이유로 서버 측에 저장되며, 클라이언트는 세션 ID를 통해 자신을 식별합니다.
- **수명 제한**: 일반적으로 세션은 **서버에 미리 정해진 시간 동안** 유지되며, 일정 시간이 지나면 만료되어 자동 삭제됩니다.

## 3. Spring Boot에서의 Session 관리

Spring Boot에서 세션을 관리하기 위해 주로 다음과 같은 설정을 사용합니다.

1. **Session Time-out 설정**: 애플리케이션의 `application.properties` 파일에서 세션의 유효 시간을 설정할 수 있습니다.
    ```properties
    server.servlet.session.timeout=30m  # 세션 만료 시간을 30분으로 설정
    ```

2. **세션 저장소 설정**: Spring Boot는 세션 정보를 **메모리**, **데이터베이스**, **Redis** 등 다양한 저장소에 저장할 수 있도록 지원합니다.
    - 기본적으로 **in-memory** 저장소를 사용하며, 필요에 따라 Redis와 같은 **외부 캐시 저장소**를 사용할 수도 있습니다.

3. **@SessionAttributes**: Spring에서 특정 컨트롤러에서만 세션을 사용할 경우 `@SessionAttributes`를 통해 특정 속성만 세션에 저장할 수 있습니다.

## 4. 세션 흐름 이해하기

1. **사용자가 로그인 요청**을 보내면 서버는 로그인 정보를 검증하고 새로운 **세션 ID를 생성**합니다.
2. 서버는 생성된 세션 ID와 **사용자 정보를 세션에 저장**하고, 클라이언트는 이 세션 ID를 쿠키로 저장합니다.
3. 이후 클라이언트가 요청을 보낼 때마다 이 **세션 ID가 함께 전송**되어 서버는 사용자 식별 및 데이터 접근을 가능하게 합니다.

## 5. Session과 Cookie의 차이점

| 구분           | Session                                        | Cookie                                      |
| -------------- | ---------------------------------------------- | ------------------------------------------- |
| 저장 위치      | 서버                                          | 클라이언트                                  |
| 데이터 보안    | 서버에 저장되어 상대적으로 안전                 | 클라이언트에 저장되어 조작 가능성 있음      |
| 수명 관리      | 서버 설정에 따라 시간 만료 가능                 | 만료 기간 설정 가능, 브라우저 종료 시 삭제 가능 |
| 용도           | 사용자 인증, 상태 정보 유지                     | 간단한 설정 정보, 비 로그인 사용자 트래킹      |

## 6. Spring Session을 활용한 확장 기능

Spring Boot에서는 **Spring Session** 모듈을 사용하여 세션을 확장하고 다양한 저장소에서 효율적으로 세션을 관리할 수 있습니다.

- **Spring Session**을 사용하면, **Redis, MySQL**과 같은 외부 데이터베이스에 세션 정보를 저장할 수 있습니다.
- 이를 통해 서버 간 세션 정보를 공유하여, **부하 분산과 확장성**을 쉽게 관리할 수 있습니다.

---

### 결론

Session은 웹 애플리케이션에서 상태 유지를 위한 필수적인 기술입니다. Spring Boot에서는 다양한 세션 관리 기능과 옵션을 제공하여, 세션을 안전하고 효율적으로 관리할 수 있습니다.
